frederickkPaper={FIO:{},F3D:{},FShape:{},FTime:{},random:function(b,a){if(a===undefined){a=b;b=0}return(b+Math.random()*(a-b))},randomInt:function(b,a){return parseInt(frederickkPaper.random(b,a))},randomBias:function(e,d,a){var g=new Array(90,9,4,2.33,1.5,1,0.66,0.43,0.25,0.11,0.01);a=Math.max(0,Math.min(a,1))*10;var b=parseInt(Math.floor(a));var h=g[b];if(a<10){h+=(g[b+1]-h)*(a-b)}return Math.pow(Math.random(),h)*(d-e)+e},clamp:function(d,b,a){return d<b?b:d>a?b:d},norm:function(b,d,a){return(b-d)/(a-d)},map:function(e,b,d,a,g){return a+(g-a)*((e-b)/(d-b))},roundDecimal:function(d,a){var b=Math.pow(10,a);return Math.round(d*b)/b},snap:function(b,a,d){if(d===undefined){d=Math.round}return a*d(b/a)},lerp:function(d,a,b){return a+(d-a)*b},degrees:function(a){return a*(180/Math.PI)},radians:function(a){return a*(Math.PI/180)},getAngle:function(b,a){return Math.atan2(a.y-b.y,a.x-b.x)*180/Math.PI},getCommonTangents:function(h,e){var o=e.position.x-h.position.x;var n=e.position.y-h.position.y;var b=Math.sqrt(h.bounds.size.area());var a=Math.sqrt(e.bounds.size.area());b/=2;a/=2;var i=h.position.getDistance(e.position);if(i<=Math.abs(a-b)){return}var g=Math.atan2(n,o);var d=Math.acos((b-a)/i);var m=new Point(h.position.x+b*Math.cos(g+d),h.position.y+b*Math.sin(g+d));var l=new Point(e.position.x+a*Math.cos(g+d),e.position.y+a*Math.sin(g+d));var j=new Point(h.position.x+b*Math.cos(g-d),h.position.y+b*Math.sin(g-d));var k=new Point(e.position.x+a*Math.cos(g-d),e.position.y+a*Math.sin(g-d));return[m,l,k,j]},sq:function(a){return a*a},boolToInt:function(a){return(a)?1:0},getType:function(a){if(a instanceof paper.Point){return"Point"}else{if(a instanceof paper.Size){return"Size"}else{if(a instanceof paper.Rectangle){return"Rectangle"}else{if(a instanceof paper.Group){return"Group"}else{if(a instanceof paper.PlacedItem){return"PlacedItem"}else{if(a instanceof paper.Raster){return"Raster"}else{if(a instanceof paper.PlacedSymbol){return"PlacedSymbol"}else{if(a instanceof paper.Path){return"Path"}else{if(a instanceof paper.CompoundPath){return"CompoundPath"}else{if(a instanceof paper.Symbol){return"Symbol"}else{if(a instanceof paper.TextItem){return"TextItem"}else{return"undefined"}}}}}}}}}}}},findByName:function(a,b){var g;for(var d=0;d<a.length;d++){var e=a[d];if(e.name==b){g=e}}return g},trimToFit:function(a){var b=a.visibleRange.content;a.content=trim(b);return a},rtrim:function(b){for(var a=b.length-1;b.charAt(a)==" ";a--){b=b.substring(0,a)}return b},trim:function(a){a=a.replace(/(^\s*)|(\s*$)/gi,"");a=a.replace(/[ ]{2,}/gi," ");a=a.replace(/\n /,"\n");return a},strToBool:function(a){switch(a.toLowerCase()){case"true":case"yes":case"1":return true;case"false":case"no":case"0":case null:return false;default:return Boolean(a)}},merge:function(d,b){var a=d.concat(b);a.shuffle();return a},alphabetical:function(e,d){e=e.toLowerCase();e=e.replace(/ä/g,"a");e=e.replace(/ö/g,"o");e=e.replace(/ü/g,"u");e=e.replace(/ß/g,"s");d=d.toLowerCase();d=d.replace(/ä/g,"a");d=d.replace(/ö/g,"o");d=d.replace(/ü/g,"u");d=d.replace(/ß/g,"s");return(e==d)?0:(e>d)?1:-1},distanceToCenter:function(e,d){var i=e.distanceToCenter();var h=d.distanceToCenter();var g=0;if(i>h){g=-1}else{if(i<h){g=1}}return g}};Array.prototype.max=function(){var b=this[0];var a=this.length;for(var d=1;d<a;d++){if(this[d]>b){b=d}}return b};Array.prototype.min=function(){var d=this[0];var a=this.length;for(var b=1;b<a;b++){if(this[b]<d){d=b}}return d};Array.prototype.shuffle=function(){for(var b,a,d=this.length;d;b=parseInt(Math.random()*d),a=this[--d],this[d]=this[b],this[b]=a){}};paper.Item.inject({distanceToCenter:function(){var b=this.position.x-activeDocument.activeArtboard.bounds.center.x;var a=this.position.y-activeDocument.activeArtboard.bounds.center.y;var d=(b*b+a*a)+1;return d},getRadius:function(){return this.size.radius()},snapGrid:function(b){var a=new frederickkPaper.FPoint().snapGrid(b);this.position=a},snapIso:function(b){var a=new frederickkPaper.FPoint().snapIso(b);this.position=a}});paper.Size.inject({random:function(a,e,d,b){a=(a!=undefined)?a:0;e=(e!=undefined)?e:view.bounds.width;d=(d!=undefined)?d:0;b=(b!=undefined)?b:view.bounds.height;this.width=frederickkPaper.random(a,e);this.height=frederickkPaper.random(d,b);return this},area:function(){return(this.width*this.height)},radius:function(){var e=this.width;var d=this.height;return(Math.sqrt(e*e+d*d)/2)}});paper.Point.inject({});frederickkPaper.FColor=function(){var a=function(b){var d=c.toString(16);return d.length==1?"0"+d:d};this.lerpRGBColor=function(i,h,l){var k=frederickkPaper.lerp(i.red,h.red,l);var j=frederickkPaper.lerp(i.green,h.green,l);var d=frederickkPaper.lerp(i.blue,h.blue,l);var e=new paper.RGBColor(k,j,d);return e};this.randomRGBColor=function(){return new paper.RGBColor(Math.random(),Math.random(),Math.random())};this.randomGrayColor=function(){return new paper.GrayColor(Math.random())};this.random=function(){return this.randomRGBColor()};this.ColorToInt=function(d){var b;try{b=d.red;b=b<<8;b|=d.green;b=b<<8;b|=d.blue}catch(e){console.log(e);b=16777215}return b};this.IntToColor=function(i){var h=(RGB>>16)&255;var e=(RGB>>8)&255;var d=RGB&255;return new paper.RGBColor((h/255),(e/255),(d/255))};this.ColorToHex=function(e){var j,i,d;var k="";try{j=e.red*255;i=e.green*255;d=e.blue*255;k="#"+a(j)+a(i)+a(d)}catch(h){console.log(h)}return k};this.HexToColor=function(j){if(j.length>=7){j=j.split("#")[1]}else{j=j}var e=parseInt(j,16);var i=(e>>16)&255;var h=(e>>8)&255;var d=e&255;return new paper.RGBColor(i/255,h/255,d/255)};this.ByteToColor=function(j,i,m,h){var l=j/255;var k=i/255;var d=m/255;var e=(h!=undefined)?h/255:1;return new paper.RGBColor(l,k,d,e)}};paper.Color.inject({darken:function(a){this.red-=a;this.green-=a;this.blue-=a;return this},lighten:function(a){this.red+=a;this.green+=a;this.blue+=a;return this}});frederickkPaper.FConversions=function(){this.ptToMm=0.352777778;this.mmToPt=2.83464567;this.ptToCm=0.0352777778;this.CmToPt=28.3464567;this.ptToIn=0.0138888889;this.inToPt=72;this.ptToPi=0.0833333333;this.piToPt=12};frederickkPaper.FPoint=paper.Point.extend({norm:function(a,b){this.x=frederickkPaper.norm(this.x,start.x,stop.x);this.y=frederickkPaper.norm(this.y,start.y,stop.y);return this},random:function(b,e,a,d){b=(b!=undefined)?b:0;e=(e!=undefined)?e:view.bounds.width;a=(a!=undefined)?a:0;d=(d!=undefined)?d:view.bounds.height;this.x=frederickkPaper.random(b,e);this.y=frederickkPaper.random(a,d);return this},heading:function(){return -1*(Math.atan2(-this.y,this.x))},interpolateTo:function(b,a){this.x+=((b.x-this.x)*a);this.y+=((b.y-this.y)*a);return this},lerp:function(d,b,g){var a=frederickkPaper.lerp(d.x,b.x,g);var e=frederickkPaper.lerp(d.y,b.y,g);return new Point(a,e)},limit:function(a){if(this.magSq()>a*a){this.normalize();this.mult*a;return this}return this},magSq:function(){return this.x*this.x+this.y*this.y},snapGrid:function(d){var b,a;b=Math.round(this.y/d.height-this.x/d.width);a=Math.round(this.y/d.height+this.x/d.width);this.x=(a-b)/2*d.width;this.y=(a+b)/2*d.height;return this},snapIso:function(a){if(a===null){a=1}return this.snapGrid(new Size(32*a,16*a))},getAngle:function(){return Math.atan2(this.y-0,this.x-0)}});frederickkPaper.FIO={saveLocal:function(a,b){if(window.localStorage){localStorage.setItem(a,String(b))}else{console.error("localStorage not supported")}},getLocal:function(a){return localStorage.getItem(a)},getLocalInt:function(a){return parseInt(getLocal(a))},getLocalFloat:function(a){return parseFloat(getLocal(a))},getAllLocal:function(){return sessionStorage},deleteLocal:function(a){localStorage.removeItem(a)},saveSession:function(a,b){if(window.sessionStorage){sessionStorage.setItem(a,String(b))}else{console.error("sessionStorage not supported")}},getSession:function(a){return sessionStorage.getItem(a)},getSessionInt:function(a){return parseInt(getSession(a))},getSessionFloat:function(a){return parseFloat(getSession(a))},getAllSession:function(){return sessionStorage},deleteSession:function(a){sessionStorage.removeItem(a)},saveCookie:function(d,e,g){if(g){var b=new Date();b.setTime(b.getTime()+(g*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=d+"="+e+a+"; path=/"},openCookie:function(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var g=a[d];while(g.charAt(0)==" "){g=g.substring(1,g.length)}if(g.indexOf(e)==0){return g.substring(e.length,g.length)}}return null},deleteCookie:function(a){saveCookie(a,"",-1)}};frederickkPaper.FTime.FDate=function(){this.date;var b=["January","February","March","April","May","June","July","August","September","October","November","December"];var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var d=function(e){if(e.length==1){e="0"+e}return e};this.year=function(){if(this.date===undefined){this.date=new Date()}var e=String(this.date.getFullYear());return e};this.month=function(){if(this.date===undefined){this.date=new Date()}var e=String(this.date.getMonth());hour=d(e);return e};this.day=function(){if(this.date===undefined){this.date=new Date()}var e=String(this.date.getDate());return e};this.hour=function(){if(this.date===undefined){this.date=new Date()}var e=String(this.date.getHours());e=d(e);return e};this.minute=function(){if(this.date===undefined){this.date=new Date()}var e=String(this.date.getMinutes());e=d(e);return e};this.second=function(){if(this.date===undefined){this.date=new Date()}var e=String(this.date.getSeconds());e=d(e);return e};this.now=function(g){var e=[];if(g===undefined){e=[true,true,true]}else{e=g}var h="";if(e[0]){h+=this.hour()}if(e[0]&&e[1]){h+=":"}if(e[1]){h+=this.minute()}if(e[1]&&e[2]){h+=":"}if(e[2]){h+=this.second()}return h};this.nowMilliseconds=function(){return this.toMillsecond(this.hour(),this.minute(),this.second())};this.add=function(e,i,g,h){return this.date+(24*e+60*i+60*g+1000*s)};this.sub=function(e,i,g,h){return this.date-(24*e+60*i+60*g+1000*s)};this.set=function(e,i,g,h){this.time=new Date();this.time.setTime((24*e+60*i+60*g+1000*s));return this.time};this.get=function(e,m){var n;if(m===undefined){n=new Array(true,true,true)}else{n=m}var l=parseInt((e/1000)%60);var i=parseInt(((e/1000)/60)%60);var k=parseInt((((e/1000)/60)/60)%24);var g,h,o;if(k<10){g="0"+k}else{g=""+k}if(i<10){h="0"+i}else{h=""+i}if(l<10){o="0"+l}else{o=""+l}var j="";if(n[0]){j+=g}if(n[0]&&n[1]){j+=":"}if(n[1]){j+=h}if(n[1]&&n[2]){j+=":"}if(n[2]){j+=o}return j};this.toMillsecond=function(l,g,k){var j,e,i;if(g===undefined&&k===undefined){j=this.toArray(l)[0];e=this.toArray(l)[1];i=this.toArray(l)[2]}else{j=l;e=g;i=k}return parseInt(3600000*j+60000*e+1000*i)};this.toArray=function(e){var g=e.split(":");return[g[0],g[1],g[2]]}};frederickkPaper.FTime.FStepper=function(){var g=1000;var h=0;var j=0;var l=0;var k=false;var d=false;var i=false;var e=true;var a=0.05;var b=true;this.delta=1;this.counter=-1;this.toggle=function(){if(l==0){l=1;this.stepOut()}else{l=0;this.stepIn()}};this.update=function(m){if(k){k=false;h=m;if(d){j=frederickkPaper.roundDecimal((m+((1-this.delta)*g)),3)}else{j=frederickkPaper.roundDecimal((m+(this.delta*g)),3)}if(j<=m){if(d){d=false;this.delta=1}else{i=false;this.delta=0}}}if(d){this.delta=frederickkPaper.roundDecimal((1-((j-m)/g)),3);if(m==j){d=false;this.delta=1;this.counter++;return}}else{if(i){this.delta=frederickkPaper.roundDecimal(((j-m)/g),3);if(m==j){d=false;this.delta=0;this.counter++;return}}}};this.stepIn=function(){if(d){return}if(this.delta==1){return}k=true;d=true;i=false};this.stepOut=function(){if(i){return}if(this.delta==0){return}k=true;i=true;d=false};this.isIn=function(){return d};this.isOut=function(){return i};this.isDone=function(){if(this.delta<1&&this.delta>0){return false}else{if(this.delta>=1){this.delta=1;return true}else{if(this.delta<=0){this.delta=0;return true}}}};this.stop=function(){k=d=i=false};this.setSeconds=function(m){this.setMillis(parseInt(m*1000))};this.setMillis=function(m){g=m;g/=1000};this.setDelta=function(m){this.delta=m}};frederickkPaper.FTime.FStopwatch=function(){var d;var e;var b=0;var a=0;this.toggle=function(){if(a==0){this.start()}else{this.pause()}};this.start=function(){a=1;e=new Date();e.setTime(e.getTime()-b)};this.pause=function(){a=0;d=new Date();b=d.getTime()-e.getTime()};this.reset=function(){a=0;b=0};this.set=function(g,h){b=g;(h==true)?a=0:a=1;e=new Date();e.setTime(e.getTime()-b);this.toggle()};this.get=function(){if(a==1){d=new Date();b=d.getTime()-e.getTime()}return b};this.isRunning=function(){return(a)?true:false}};frederickkPaper.F3D.FPath3=this.FPath3=Path.extend({_type:"FPath3",_scene:null,_matrix:null,_points3:null,_rotation:null,_translation:null,initialize:function(a){this.base();this._closed=false;this._scene=a;this._matrix=new Matrix3D();this._rotation=new frederickkPaper.F3D.FPoint3();this._translation=new frederickkPaper.F3D.FPoint3();this._points3=[];this.name="FPath3"},setScene:function(b){this._scene=b;for(var a=0;a<this._points3.length;a++){this._points3[a].setup(this._scene)}},add3:function(a){this._points3[this._points3.length]=a},translate:function(e,b,a){if(typeof e=="number"){this._translation.x=e;this._translation.y=b;this._translation.z=a}else{if(typeof e=="object"){this._translation.x=e.x;this._translation.y=b.y;this._translation.z=a.z}else{this._translation.x=e!=undefined?e:0;this._translation.y=b!=undefined?b:0;this._translation.z=a!=undefined?a:0}}for(var d=0;d<this._points3.length;d++){var g=this._points3[d];g.setX((g.x+this._translation.x));g.setY((g.y+this._translation.y));g.setZ((g.z+this._translation.z))}},rotateX:function(a){this._rotation.x=a},rotateY:function(a){this._rotation.y=a},rotateZ:function(a){this._rotation.z=a},get:function(){this._segments=[];for(var a=0;a<this._points3.length;a++){var b=this._points3[a];this.add(new Point(b.x2D(),b.y2D()))}return this}});frederickkPaper.F3D.FPoint3=this.FPoint3=function(g,e,d){var i=null;var h=0;var k=0;var a=0;var j=0;var b=0;this.x=g!=undefined?g:0;this.y=e!=undefined?e:0;this.z=d!=undefined?d:0;this.setup=function(o){i=o;var l=i.setupPoint(this.x,this.y,this.z);var m=l*3;var n=l*2;h=m;k=m+1;a=m+2;j=n;b=n+1};this.random=function(m,p,l,o,q,n){m=(m!=undefined)?m:0;p=(p!=undefined)?p:view.bounds.width;l=(l!=undefined)?l:0;o=(o!=undefined)?o:view.bounds.height;q=(q!=undefined)?l:0;n=(n!=undefined)?o:1000;this.x=frederickkPaper.random(m,p);this.y=frederickkPaper.random(l,o);this.z=frederickkPaper.random(q,n);return new frederickkPaper.F3D.FPoint3(this.x,this.y,this.z)};this.setX=function(l){if(i!=null){i.points3D[h]=l}this.x=l};this.setY=function(l){if(i!=null){i.points3D[k]=l}this.y=l};this.setZ=function(l){if(i!=null){i.points3D[a]=l}this.z=l};this.set=function(n,m,l){this.setX(n);this.setY(m);this.setZ(l)};this.get=function(){return new frederickkPaper.F3D.FPoint3(this.x,this.y,this.z)};this.x2D=function(){return i.points2D[j]};this.y2D=function(){return i.points2D[b]};this.getSceneIndex=function(){return _sceneIndex};this.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};this.add=function(n,m,l){if(typeof n=="number"){this.x+=n;this.y+=m;this.z+=l}else{if(typeof n=="object"){this.x+=n.x();this.y+=n.y();this.z+=n.z()}}this.set(this.x,this.y,this.z)};this.sub=function(n,m,l){if(typeof n=="number"){this.x-=n;this.y-=m;this.z-=l}else{if(typeof n=="object"){this.x-=n.x();this.y-=n.y();this.z-=n.z()}}this.set(this.x,this.y,this.z)};this.scale=function(l){this.x*=l;this.y*=l;this.z*=l;this.set(this.x,this.y,this.z)};this.mult=function(n,m,l){if(typeof n=="number"){this.x*=n;this.y*=m;this.z*=l}else{if(typeof n=="object"){this.x*=n.x();this.y*=n.y();this.z*=n.z()}}this.set(this.x,this.y,this.z)};this.div=function(n,m,l){if(typeof n=="number"){this.x/=n;this.y/=m;this.z/=l}else{if(typeof n=="object"){this.x/=n.x();this.y/=n.y();this.z/=n.z()}}this.set(this.x,this.y,this.z)};this.getDistance=function(o){var n=this.x-o.x();var m=this.y-o.y();var l=this.z-o.z();return Math.sqrt(n*n+m*m+l*l)};this.angleBetween=function(p,o){var m=p.x()*o.x()+p.y()*o.y()+p.z()*o.z();var n=Math.sqrt(p.x()*p.x()+p.y()*p.y()+p.z()*p.z());var l=Math.sqrt(o.x()*o.x()+o.y()*o.y()+o.z()*o.z());return Math.acos(m/(n*l))};this.normalize=function(){var l=this.mag();if(l!=0&&l!=1){this.div(l)}};this.toString=function(){return"[ "+this.x+", "+this.y+", "+this.z+" ]"};this.array=function(){return[this.x,this.y,this.z]}};frederickkPaper.F3D.FScene3D=this.FScene3D=function(){var j="PERSPECTIVE";var h=null;var g=new frederickkPaper.F3D.FSize3(0,0,0);var d=1;var i=new frederickkPaper.F3D.FPoint3(0,0,0);var e=0;var a=null;var b=null;this.bounds=new frederickkPaper.F3D.FSize3(0,0,0);this.points3D=[];this.points2D=[];this._ortho=function(){h.makeOrtho(-g.height,g.height,g.height,-g.height,-g.height,g.height)};this._perspective=function(){h.makePerspective(50,1,this.bounds.depth,this.bounds.depth*4)};this.setup=function(l,k,m,n){this.points3D=[];this.points2D=[];a=[];h=new Matrix3D();this.bounds.width=l||paper.view.bounds.width;this.bounds.height=k||paper.view.bounds.height;this.bounds.depth=m||1000;g.width=this.bounds.width*0.5;g.height=this.bounds.height*0.5;g.depth=this.bounds.depth*0.5;this.setMode(n);b=new paper.Group()};this.draw=function(){h.identity();if(j=="ORTHO"){this._ortho()}else{this._perspective()}h.scale(d,d,d);h.rotateX(i.x);h.rotateY(i.y);h.rotateZ(i.z);h.translate(0,0,this.bounds.depth);var n=h.transformArray(this.points3D);for(var o=0;o<e;o++){var k=o*3;var m=o*2;var r=n[k];var q=n[k+1];var p=n[k+2];var l=this.bounds.depth/(p+this.bounds.depth);this.points2D[m]=r*l+g.width;this.points2D[m+1]=q*l+g.height}b.removeChildren();for(var o=0;o<a.length;o++){var t=a[o].get();console.log(t._points3);if(t.children!=null){console.log(t.children.length)}if(t!=null){b.appendTop(t)}}console.log("---------");if(j=="ORTHO"){b.scale(200)}return b};this.setupPoint=function(m,l,k){var n=e;this.points2D[this.points2D.length]=0;this.points2D[this.points2D.length]=0;this.points3D[this.points3D.length]=m;this.points3D[this.points3D.length]=l;this.points3D[this.points3D.length]=k;e++;return n};this.setMode=function(k){j=k!=undefined?k:"PERSPECTIVE"};this.addItem=function(l){if(l.length!=null||l.length>0){for(var k=0;k<l.length;k++){a[a.length]=l[k];l[k].setScene(this)}}else{a[a.length]=l;l.setScene(this)}};this.rotateX=function(k){i.setX(k)};this.rotateY=function(k){i.setY(k)};this.rotateZ=function(k){i.setZ(k)};this.get=function(){return b};this.getBounds=function(){return[this.bounds.width,this.bounds.height,this.bounds.depth]};this.getMatrix=function(){return h};this.getFocalLength=function(){return this.bounds.depth}};frederickkPaper.F3D.FSize3=this.FSize3=function(d,b,a){this.width=d!=undefined?d:0;this.height=b!=undefined?b:0;this.depth=a!=undefined?a:0;this.setWidth=function(e){this.width=e};this.setHeight=function(e){this.height=e};this.setDepth=function(e){this.depth=e};this.set=function(h,g,e){this.setWidth(h);this.setHeight(g);this.setDepth(e)};this.get=function(){return new frederickkPaper.F3D.FSize3(this.width,this.height,this.depth)};this.random=function(e,k,h,g,j,i){e=(e!=undefined)?e:0;k=(k!=undefined)?k:view.bounds.width;h=(h!=undefined)?h:0;g=(g!=undefined)?g:view.bounds.height;j=(j!=undefined)?j:0;i=(i!=undefined)?i:1000;this.width=frederickkPaper.random(e,k);this.height=frederickkPaper.random(h,g);this.depth=frederickkPaper.random(j,i);return this};this.volume=function(){return(this.width*this.height*this.depth)}};var Matrix3D=function(o,n,l,j,g,e,d,b,a,r,q,p,m,k,i,h){this.n11=o||1;this.n12=n||0;this.n13=l||0;this.n14=j||0;this.n21=g||0;this.n22=e||1;this.n23=d||0;this.n24=b||0;this.n31=a||0;this.n32=r||0;this.n33=q||1;this.n34=p||0;this.n41=m||0;this.n42=k||0;this.n43=i||0;this.n44=h||1;this.clone=function(){return new Matrix3D(this.n11,this.n12,this.n13,this.n14,this.n21,this.n22,this.n23,this.n24,this.n31,this.n32,this.n33,this.n34,this.n41,this.n42,this.n43,this.n44)};this.concat=function(t){var u={};u.n11=this.n11*t.n11+this.n12*t.n21+this.n13*t.n31+this.n14*t.n41;u.n12=this.n11*t.n12+this.n12*t.n22+this.n13*t.n32+this.n14*t.n42;u.n13=this.n11*t.n13+this.n12*t.n23+this.n13*t.n33+this.n14*t.n43;u.n14=this.n11*t.n14+this.n12*t.n24+this.n13*t.n34+this.n14*t.n44;u.n21=this.n21*t.n11+this.n22*t.n21+this.n23*t.n31+this.n24*t.n41;u.n22=this.n21*t.n12+this.n22*t.n22+this.n23*t.n32+this.n24*t.n42;u.n23=this.n21*t.n13+this.n22*t.n23+this.n23*t.n33+this.n24*t.n43;u.n24=this.n21*t.n14+this.n22*t.n24+this.n23*t.n34+this.n24*t.n44;u.n31=this.n31*t.n11+this.n32*t.n21+this.n33*t.n31+this.n34*t.n41;u.n32=this.n31*t.n12+this.n32*t.n22+this.n33*t.n32+this.n34*t.n42;u.n33=this.n31*t.n13+this.n32*t.n23+this.n33*t.n33+this.n34*t.n43;u.n34=this.n31*t.n14+this.n32*t.n24+this.n33*t.n34+this.n34*t.n44;u.n41=this.n41*t.n11+this.n42*t.n21+this.n43*t.n31+this.n44*t.n41;u.n42=this.n41*t.n12+this.n42*t.n22+this.n43*t.n32+this.n44*t.n42;u.n43=this.n41*t.n13+this.n42*t.n23+this.n43*t.n33+this.n44*t.n43;u.n44=this.n41*t.n14+this.n42*t.n24+this.n43*t.n34+this.n44*t.n44;this.initialize(u)};this.initialize=function(t){for(var u in t){this[u]=t[u]}};this.createBox=function(B,z,x,v,u,t,A,y,w){this.identity();if(v!=0){this.rotateX(v)}if(u!=0){this.rotateY(u)}if(t!=0){this.rotateZ(t)}if(B!=1||z!=1||x!=1){this.scale(B,z,x)}if(A!=0||y!=0||w!=0){this.translate(A,y,w)}};this.identity=function(){this.initialize({n11:1,n12:0,n13:0,n14:0,n21:0,n22:1,n23:0,n24:0,n31:0,n32:0,n33:1,n34:0,n41:0,n42:0,n43:0,n44:1})};this.rotateX=function(v){var t=Math.sin(v);var u=Math.cos(v);this.concat(new Matrix3D(1,0,0,0,0,u,-t,0,0,t,u,0,0,0,0,1))};this.rotateY=function(v){var t=Math.sin(v);var u=Math.cos(v);this.concat(new Matrix3D(u,0,t,0,0,1,0,0,-t,0,u,0,0,0,0,1))};this.rotateZ=function(v){var t=Math.sin(v);var u=Math.cos(v);this.concat(new Matrix3D(u,-t,0,0,t,u,0,0,0,0,1,0,0,0,0,1))};this.setRotateAxis=function(u,v){var F=Math.cos(v);var C=Math.sin(v);var G=1-F;var E=u.x();var D=u.y();var B=u.z();var A=G*E;var w=G*D;this.concat(A*E+F,A*D-C*B,A*B+C*D,0,A*D+C*B,w*D+F,w*B-C*E,0,A*B-C*D,w*B+C*E,G*B*B+F,0,0,0,0,1)};this.scale=function(v,u,t){this.concat(new Matrix3D(v,0,0,0,0,u,0,0,0,0,t,0,0,0,0,1))};this.translate=function(v,u,t){this.n41+=v;this.n42+=u;this.n43+=t};this.transformPoint=function(t){return new Vertex3D(this.n11*t.x+this.n21*t.y+this.n31*t.z+this.n41,this.n12*t.x+this.n22*t.y+this.n32*t.z+this.n42,this.n13*t.x+this.n23*t.y+this.n33*t.z+this.n43)};this.transformArray=function(u){var A=[];var B=u.length/3;for(var w=0;w<B;w++){var v=w*3;var t=u[v];var D=u[v+1];var C=u[v+2];A[v]=this.n11*t+this.n21*D+this.n31*C+this.n41;A[v+1]=this.n12*t+this.n22*D+this.n32*C+this.n42;A[v+2]=this.n13*t+this.n23*D+this.n33*C+this.n43}return A};this.makeFrustum=function(u,G,t,D,w,v){var H={};var F=2*w/(G-u);var C=2*w/(D-t);var E=(G+u)/(G-u);var B=(D+t)/(D-t);var A=-(v+w)/(v-w);var z=-2*v*w/(v-w);H.n11=F;H.n12=0;H.n13=E;H.n14=0;H.n21=0;H.n22=C;H.n23=B;H.n24=0;H.n31=0;H.n32=0;H.n33=A;H.n34=z;H.n41=0;H.n42=0;H.n43=-1;H.n44=0;this.concat(H)};this.makePerspective=function(x,v,z,u){var t=z*Math.tan(x*Math.PI/360);var y=-t;var A=y*v;var w=t*v;this.makeFrustum(A,w,y,t,z,u)};this.makeOrtho=function(v,I,F,t,C,B){var J={};var H=I-v;var A=F-t;var u=B-C;var G=(I+v)/H;var E=(F+t)/A;var D=(B+C)/u;J.n11=2/H;J.n12=0;J.n13=0;J.n14=-G;J.n21=0;J.n22=2/A;J.n23=0;J.n24=-E;J.n31=0;J.n32=0;J.n33=-2/u;J.n34=-D;J.n41=0;J.n42=0;J.n43=0;J.n44=1;this.concat(J)};this.toString=function(){return this.n11+","+this.n12+","+this.n13+","+this.n14+","+this.n21+","+this.n22+","+this.n23+","+this.n24+","+this.n31+","+this.n32+","+this.n33+","+this.n34+","+this.n41+","+this.n42+","+this.n43+","+this.n44}};frederickkPaper.FShape.FArrow=this.FArrow=Path.extend({initialize:function(h,d,k){this.path=new Path(h,d);k=(k!=undefined)?k:new Size(h.getDistance(d)*0.381924,h.getDistance(d)*0.381924);var b=Math.atan2(h.x-d.x,d.y-h.y);var g=[];g[0]=new Path(new Point(0,0),new Point(-k.width,-k.height));g[1]=new Path(new Point(0,0),new Point(k.width,-k.height));for(var e=0;e<g.length;e++){g[e].rotate(180+frederickkPaper.degrees(b),new Point(0,0));g[e].translate(h)}var j=new Group(this.path,g[0],g[1]);j.name="arrow";return j}});frederickkPaper.FShape.FBox=function(g){this.sides=new Array(6);this.vertices=[];this.name="";this.visible=true;this.selected=false;this.strokeCap;this.strokeJoin;this.faceFRONT=[new frederickkPaper.F3D.FPoint3(-0.5,-0.5,-0.5),new frederickkPaper.F3D.FPoint3(0.5,-0.5,-0.5),new frederickkPaper.F3D.FPoint3(0.5,0.5,-0.5),new frederickkPaper.F3D.FPoint3(-0.5,0.5,-0.5)];this.faceTOP=[new frederickkPaper.F3D.FPoint3(-0.5,-0.5,0.5),new frederickkPaper.F3D.FPoint3(0.5,-0.5,0.5),new frederickkPaper.F3D.FPoint3(0.5,-0.5,-0.5),new frederickkPaper.F3D.FPoint3(-0.5,-0.5,-0.5)];this.faceBOTTOM=[new frederickkPaper.F3D.FPoint3(-0.5,0.5,0.5),new frederickkPaper.F3D.FPoint3(0.5,0.5,0.5),new frederickkPaper.F3D.FPoint3(0.5,0.5,-0.5),new frederickkPaper.F3D.FPoint3(-0.5,0.5,-0.5)];this.faceLEFT=[new frederickkPaper.F3D.FPoint3(-0.5,-0.5,-0.5),new frederickkPaper.F3D.FPoint3(-0.5,-0.5,0.5),new frederickkPaper.F3D.FPoint3(-0.5,0.5,0.5),new frederickkPaper.F3D.FPoint3(-0.5,0.5,-0.5)];this.faceRIGHT=[new frederickkPaper.F3D.FPoint3(0.5,-0.5,-0.5),new frederickkPaper.F3D.FPoint3(0.5,-0.5,0.5),new frederickkPaper.F3D.FPoint3(0.5,0.5,0.5),new frederickkPaper.F3D.FPoint3(0.5,0.5,-0.5)];this.faceBACK=[new frederickkPaper.F3D.FPoint3(-0.5,-0.5,0.5),new frederickkPaper.F3D.FPoint3(0.5,-0.5,0.5),new frederickkPaper.F3D.FPoint3(0.5,0.5,0.5),new frederickkPaper.F3D.FPoint3(-0.5,0.5,0.5)];var i=g;var e=[["front",this.faceFRONT],["top",this.faceTOP],["bottom",this.faceBOTTOM],["left",this.faceLEFT],["right",this.faceRIGHT],["back",this.faceBACK]];var k=[1,1,1,1,1,1];var a=["normal","normal","normal","normal","normal","normal"];var b=[new paper.RGBColor(1,1,0,0.8),new paper.RGBColor(1,0,1,0.8),new paper.RGBColor(0,0,1,0.8),new paper.RGBColor(1,0,0,0.8),new paper.RGBColor(0,1,1,0.8),new paper.RGBColor(0,1,0,0.8)];var h=[new paper.RGBColor(1,1,0,0.8),new paper.RGBColor(1,0,1,0.8),new paper.RGBColor(0,0,1,0.8),new paper.RGBColor(1,0,0,0.8),new paper.RGBColor(0,1,1,0.8),new paper.RGBColor(0,1,0,0.8)];var d=[1,1,1,1,1,1];var j=new frederickkPaper.F3D.FSize3(10,10,10);this.init=function(p,n,l){for(var o=0;o<e.length;o++){this.sides[o]=new frederickkPaper.F3D.FPath3();this.sides[o].name=e[o][0];this.vertices=e[o][1];for(var m=0;m<this.vertices.length;m++){this.sides[o].add3(new frederickkPaper.F3D.FPoint3(this.vertices[m].x*j.width,this.vertices[m].y*j.height,this.vertices[m].z*j.depth))}this.sides[o].opacity=k[o];this.sides[o].blendMode=a[o];this.sides[o].visible=this.visible;this.sides[o].selected=this.selected;this.sides[o].fillColor=b[o];this.sides[o].strokeColor=h[o];this.sides[o].strokeWidth=d[o];this.sides[o].strokeCap=this.strokeCap;this.sides[o].strokeJoin=this.strokeJoin;this.sides[o].closed=true;this.sides[o].translate(p,n,l);i.addItem(this.sides[o])}};this.setSize=function(m,l,n){j.set(m,l,n)};this.setVisible=function(l){this.visible=l};this.setSelected=function(l){this.selected=l};this.setOpacity=function(l,m){if(l.length===undefined){k[l]=m}else{k=l}};this.setFillColor=function(m,l){if(m.length===undefined){b[m]=l}else{b=m}};this.setStrokeColor=function(m,l){if(m.length===undefined){h[m]=l}else{h=m}};this.setStrokeWidth=function(m,l){if(m.length===undefined){d[m]=l}else{d=m}};this.setStrokeCap=function(l){this.strokeCap=l};this.setStrokeJoin=function(l){this.strokeJoin=l};this.noFill=function(){b=[]};this.noStroke=function(){h=[]};this.get=function(){return this.sides};this.get=function(l){return this.sides[l]};this.getNumFaces=function(){return this.vertices.length-2};this.getSize=function(){return j}};frederickkPaper.FShape.FBubble=this.FBubble=Path.extend({defaultTagSize:new Size(20,20),initialize:function(i,d,a,k){a=(a!=undefined)?a:defaultTagSize;if(d.width<10){d.width=10;a=new Size(10,10)}k=(k!=undefined)?k:"RANDOM";this.path=new Path();this.path.name="bubble";this.path.add(new Point(0,0));var g=180;var b=new Point(d.height/2+Math.cos(f.radians(g))*(d.height),d.height/2+Math.sin(f.radians(g))*(d.height));this.path.arcTo(b,new Point(0,d.height));var e=frederickkPaper.randomInt(0,d.width-a.width);this.path.add(new Point(e,d.height));var j,h;if(k=="LEFT"){j=e}else{if(k=="CENTER"){j=e+(a.width/2)}else{if(k=="RIGHT"){j=e+a.width}else{j=frederickkPaper.randomInt(e,e+a.width)}}}h=d.height+a.height;this.path.add(new Point(j,h));this.path.add(new Point(e+a.width,d.height));this.path.add(new Point(d.width,d.height));g=0;b=new Point(d.height/2+Math.cos(f.radians(g))*(d.height/2),d.height/2+Math.sin(f.radians(g))*(d.height/2));this.path.arcTo(new Point(d.width,0),false);this.path.closed=true;this.path.position=new Point(i.x,i.y+(a.height/2));return this.path}});frederickkPaper.FShape.FChain=this.FChain=Path.extend({initialize:function(j,i,h,g){var e,d;var k=f.getType(j);if(k=="Point"){e=new Path.Circle(j,i);d=new Path.Circle(h,g)}else{if(k=="Path"){e=j;d=i}else{return}}var l=frederickkPaper.getCommonTangents(e,d);if(l!=null){this.path=new Path();this.path.name="chain";this.path.add(l[0]);this.path.add(l[1]);if(d.position.x>e.position.x){angle=0}else{if(d.position.y<e.position.y){angle=-90}else{if(d.position.y>e.position.y){angle=90}else{angle=180}}}var a=new Point(d.position.x+Math.cos(frederickkPaper.radians(angle))*(d.bounds.width/2),d.position.y+Math.sin(frederickkPaper.radians(angle))*(d.bounds.height/2));this.path.arcTo(a,l[2]);this.path.add(l[2]);this.path.add(l[3]);if(e.position.x>d.position.x){angle=0}else{if(e.position.y<d.position.y){angle=-90}else{if(e.position.y>d.position.y){angle=90}else{angle=180}}}var b=new Point(e.position.x+Math.cos(frederickkPaper.radians(angle))*(e.bounds.width/2),e.position.y+Math.sin(frederickkPaper.radians(angle))*(e.bounds.height/2));this.path.arcTo(b,l[0]);this.path.closed;return this.path}}});frederickkPaper.FShape.FCross=this.FCross=Path.extend({initialize:function(b,h,g,e){(g!=undefined)?g:1;(e!=undefined)?e:"LINE";var d,a;if(e=="LINE"){d=new paper.Path.Line(b.x+h.width,b.y-h.height,b.x-h.width,b.y+h.height);d.strokeWidth=g;a=new paper.Path.Line(b.x+h.width,b.y+h.height,b.x-h.width,b.y-h.height);a.strokeWidth=g}else{if(e=="SHARP"){d=new Path();d.add(b.x+h.width,b.y-h.height);d.add(b.x+h.width,(b.y-h.height)+(g/2));d.add((b.x-h.width)+(g/2),b.y+h.height);d.add(b.x-h.width,b.y+h.height);d.add(b.x-h.width,(b.y+h.height)-(g/2));d.add((b.x+h.width)-(g/2),b.y-h.height);d.closed=true;a=new Path();a.add(b.x-h.width,b.y-h.height);a.add((b.x-h.width)+(g/2),b.y-h.height);a.add(b.x+h.width,(b.y+h.height)-(g/2));a.add(b.x+h.width,b.y+h.height);a.add((b.x+h.width)-(g/2),b.y+h.height);a.add(b.x-h.width,(b.y-h.height)+(g/2));a.closed=true}}var i=new paper.Group(d,a);i.name="cross";return i}});frederickkPaper.FShape.FSphere=function(g){this.sides=[];this.vertices=[];this.name="";this.visible=true;this.selected=false;this.strokeCap;this.strokeJoin;var j=g;var i=10;var k=0.5;var d;var m;var l=[];var a=[];var b=[];var h=[];var e=[];this._calculate=function(H,n){this.vertices=[];for(var u=0;u<=H;u++){var w=(Math.PI*(-k+((u-1)/H)));var z=Math.sin(w);var F=Math.cos(w);var r=(Math.PI*(-k+(u/H)));var t=Math.sin(r);var D=Math.cos(r);for(var p=0;p<=n;p++){var C=((Math.PI*2)*((p-1)/n));var E=Math.cos(C);var B=Math.sin(C);this.vertices.push(new frederickkPaper.F3D.FPoint3(E*F,B*F,z));this.vertices.push(new frederickkPaper.F3D.FPoint3(E*D,B*D,t))}}this.sides=new Array(this.vertices.length-2);l=new Array(this.vertices.length-2);a=new Array(this.vertices.length-2);b=new Array(this.vertices.length-2);h=new Array(this.vertices.length-2);e=new Array(this.vertices.length-2);var A=this.vertices.length-2;for(var u=0;u<A;u++){var G=this.vertices[u];var o=new paper.HSLColor(360*u/A,0.9,0.7);var q=(G.z/g.getFocalLength())*100;l[u]=1;a[u]="normal";b[u]=o.darken(q);h[u]=o.darken(q);e[u]=1}};this.init=function(q,o,n){if(d==null){this.setLatsLongs(6,6)}for(var p=0;p<this.vertices.length-2;p++){this.sides[p]=new frederickkPaper.F3D.FPath3();this.sides[p].name="face"+p;this.sides[p].add3(new frederickkPaper.F3D.FPoint3(this.vertices[p].x*(i*0.5),this.vertices[p].y*(i*0.5),this.vertices[p].z*(i*0.5)));this.sides[p].add3(new frederickkPaper.F3D.FPoint3(this.vertices[p+1].x*(i*0.5),this.vertices[p+1].y*(i*0.5),this.vertices[p+1].z*(i*0.5)));this.sides[p].add3(new frederickkPaper.F3D.FPoint3(this.vertices[p+2].x*(i*0.5),this.vertices[p+2].y*(i*0.5),this.vertices[p+2].z*(i*0.5)));this.sides[p].opacity=l[p];this.sides[p].blendMode=a[p];this.sides[p].visible=this.visible;this.sides[p].selected=this.selected;this.sides[p].fillColor=b[p];this.sides[p].strokeColor=h[p];this.sides[p].strokeWidth=e[p];this.sides[p].strokeCap=this.strokeCap;this.sides[p].strokeJoin=this.strokeJoin;this.sides[p].closed=true;this.sides[p].translate(q,o,n);g.addItem(this.sides[p])}};this.setSize=function(n){i=n};this.setLatsLongs=function(o,n){d=(o<4)?4:o;m=(n<4)?4:n;this._calculate(d,m)};this.setVisible=function(n){this.visible=n};this.setSelected=function(n){this.selected=n};this.setOpacity=function(n,p){if(n.length===undefined){l[n]=p}else{l=n}};this.setFillColor=function(q,o){if(q.length===undefined){b[q]=o}else{for(var p=0;p<q.length;p++){var n=this.vertices[p];var r=(n.z/g.getFocalLength())*100;b[p]=q.darken(r)}}};this.setStrokeColor=function(q,o){if(q.length===undefined){h[q]=o}else{for(var p=0;p<q.length;p++){var n=this.vertices[p];var r=(n.z/g.getFocalLength())*100;h[p]=q.darken(r)}}};this.setStrokeWidth=function(o,n){if(o.length===undefined){e[o]=n}else{e=o}};this.setStrokeCap=function(n){this.strokeCap=n};this.setStrokeJoin=function(n){this.strokeJoin=n};this.noFill=function(){b=[]};this.noStroke=function(){h=[]};this.setVertices=function(n,o){if(n.length===undefined){this.vertices[n]=o}else{this.vertices=n}};this.get=function(){return this.sides};this.get=function(n){return this.sides[n]};this.getNumFaces=function(){return this.vertices.length-2};this.getVertices=function(){return this.vertices};this.getSize=function(){return i}};frederickkPaper.FControl=function(a){this.divId=a;this.addCheck=function(d,e){var b=document.createElement("input");b.setAttribute("type","chackbox");b.setAttribute("value",e);b.setAttribute("name",d);var g=document.createElement("div");g.appendChild(b);var h=document.getElementById(this.divId);h.appendChild(g)};this.addInput=function(d,e){var b=document.createElement("input");b.setAttribute("type","text");b.setAttribute("className","txt");b.setAttribute("value",e);b.setAttribute("name",d);var g=document.createElement("div");g.appendChild(b);var h=document.getElementById(this.divId);h.appendChild(g)}};